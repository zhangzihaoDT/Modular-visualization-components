!function(l){function e(e){for(var t,n,r=e[0],o=e[1],a=e[2],i=0,u=[];i<r.length;i++)n=r[i],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&u.push(s[n][0]),s[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(l[t]=o[t]);for(f&&f(e);u.length;)u.shift()();return d.push.apply(d,a||[]),c()}function c(){for(var e,t=0;t<d.length;t++){for(var n=d[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==s[a]&&(r=!1)}r&&(d.splice(t--,1),e=i(i.s=n[0]))}return e}var n={},s={0:0},d=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=l,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var f=r;d.push([62,1]),c()}({61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);n(61);var b=n(0);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=Object(b.d)("../data/un-migration/Table 1-Table 1.csv",function(e){if(!(900<=+e.Code)){var t=[],n=e["Major area, region, country or area of destination"],r=+e.Year;for(var o in delete e.Year,delete e["Sort order"],delete e["Major area, region, country or area of destination"],delete e.Notes,delete e.Code,delete e["Type of data (a)"],delete e.Total,e){var a=o,i=e[o];".."!==i&&t.push({origin_name:a,dest_name:n,year:r,value:+i.replace(/,/g,"")})}return t}}).then(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}),o=Object(b.d)("../data/un-migration/ANNEX-Table 1.csv",function(e){return[e["Region, subregion, country or area"],e.Code.padStart(3,"0")]}).then(function(e){return new Map(e)}),a=Object(b.d)("../data/country-metadata.csv",function(e){return{iso_a3:e.ISO_A3,iso_num:e.ISO_num,developed_or_developing:e.developed_or_developing,region:e.region,subregion:e.subregion,name_formal:e.name_formal,name_display:e.name_display,lngLat:[+e.lng,+e.lat]}});Promise.all([r,o,a]).then(function(e){var t=l(e,3),n=t[0],a=t[1],r=t[2].map(function(e){return[e.iso_num,e]}),i=new Map(r),o=n.map(function(e){var t=a.get(e.origin_name),n=a.get(e.dest_name);e.origin_code=t,e.dest_code=n;var r=i.get(t),o=i.get(n);return r&&(e.origin_subregion=r.subregion),o&&(e.dest_subregion=o.subregion),e}).filter(function(e){return"840"===e.origin_code}),u=b.f().key(function(e){return e.dest_subregion}).key(function(e){return e.year}).rollup(function(e){return b.i(e,function(e){return e.value})}).entries(o);b.h(".main").selectAll(".chart").data(u).enter().append("div").attr("class","chart").each(function(e){var t,n,r,o,a,i,u,l,c,s,d,f,p,g,y,v;console.group(),console.log(this),console.log(e),console.groupEnd(),t=e.values,r=(n=this).clientWidth,o=n.clientHeight,l=r-(u=i=64)-(a=32),c=o-a-i,s=b.g().domain([1985,2020]).range([0,l]),d=b.g().domain([0,25e4]).range([c,0]),f=b.e().x(function(e){return s(+e.key)}).y(function(e){return d(e.value)}),p=b.a().x(function(e){return s(+e.key)}).y0(c).y1(function(e){return d(e.value)}),g=b.b().scale(s).tickFormat(function(e){return"'"+String(e).slice(-2)}),y=b.c().scale(d).tickSize(-l).ticks(3),(v=b.h(n).append("svg").attr("width",r).attr("height",o).append("g").attr("class","plot").attr("transform","translate(".concat(u,", ").concat(a,")"))).append("path").attr("class","line").datum(t).attr("d",function(e){return f(e)}).style("fill","none").style("stroke","#333").style("stroke-width","2px"),v.append("path").attr("class","area").datum(t).attr("d",function(e){return p(e)}).style("fill-opacity",.03),v.append("g").attr("class","axis axis-x").attr("transform","translate(0, ".concat(c,")")).call(g),v.append("g").attr("class","axis axis-y").call(y)})})}});